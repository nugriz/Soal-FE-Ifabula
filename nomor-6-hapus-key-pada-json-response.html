<!DOCTYPE html>
<html>
    <head>
        <title>Menampilkan 10 Post</title>
        <style>
            table, th, td, tr {
                border: 1px solid black;
            }
        </style>
    </head>
    <body>
        <h1>Posts</h1>
        <script>
            // create table with header
            var table = document.createElement('table') 
            var headerRow = table.insertRow()
            var headerUserId = headerRow.insertCell(0)
            var headerId = headerRow.insertCell(1)
            var headerTitle = headerRow.insertCell(2)
            var headerBody = headerRow.insertCell(3)

            headerUserId.textContent = 'User Id [delete]'
            headerId.textContent = `Id [delete]`
            headerTitle.textContent = `Title [delete]`
            headerBody.textContent = `Body [delete]`

            headerUserId.className = 'userId'
            headerId.className = 'id'
            headerTitle.className = 'title'
            headerBody.className = 'body'

            headerUserId.setAttribute('onclick', `deleteKey('userId')`)
            headerId.setAttribute('onclick', `deleteKey('id')`)
            headerTitle.setAttribute('onclick', `deleteKey('title')`)
            headerBody.setAttribute('onclick', `deleteKey('body')`)

            fetch('https://jsonplaceholder.typicode.com/posts')
                .then(res => {
                    return res.json();
                })
                .then(data => {
                    // Insert 10 data to table
                    posts = data.slice(0,10)
                    posts.map( post => {
                        var row = table.insertRow()
                        var userId = row.insertCell(0)
                        var id = row.insertCell(1)
                        var title = row.insertCell(2)
                        var body = row.insertCell(3)

                        userId.textContent = `${post.userId}`
                        id.textContent = `${post.id}`
                        title.textContent = `${post.title}`
                        body.textContent = `${post.body}`

                        userId.className = 'userId'
                        id.className = 'id'
                        title.className = 'title'
                        body.className = 'body'
                        }
                    )
                    document.body.appendChild(table);
                })
                .catch(error => {
                    console.error(error);
                });
            
            function deleteKey(key){
                var keys = document.querySelectorAll(`.${key}`)
                keys.forEach(element => {
                    element.remove()
                });
            }
        </script>
    </body>
</html>